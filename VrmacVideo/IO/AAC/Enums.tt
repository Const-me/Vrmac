<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ assembly name="System.Core" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ output extension=".cs" #>// This C# source file has been generated by a T4 template.
using System;

namespace VrmacVideo.IO.AAC
{
	/// <summary>Transport type identifiers</summary>
	enum eTransportType: int
	{
<#
	foreach( var v in readSource( this.Host.ResolvePath( "transportType.txt" ) ) )
	{
#>		/// <summary><#= v.comment #></summary>
		<#= v.code #>,
<#
	}
#>
	}

	/// <summary>Speaker description tags.</summary>
	[Flags]
	enum eAudioChannel: int
	{
<#
	foreach( var v in readSource( this.Host.ResolvePath( "channelType.txt" ) ) )
	{
#>		/// <summary><#= v.comment #></summary>
		<#= v.code #>,
<#
	}
#>
	}
}<#+
static readonly char[] space = new char[ 1 ] { ' ' };

struct EnumValue
{
	public readonly string code, comment;

	public EnumValue( string line )
	{
		string[] fields = line.Split( space, 3 );
		code = $"{ fields[ 1 ] } = { fields[ 0 ] }";
		comment = fields[ 2 ];
	}
}

static IEnumerable<EnumValue> readSource( string sourcePath )
{
	using( var file = File.OpenText( sourcePath ) )
	{
		while( true )
		{
			string line = file.ReadLine();
			if( null == line )
				yield break;
			if( string.IsNullOrWhiteSpace( line ) )
				continue;
			yield return new EnumValue( line );
		}
	}
}
#>